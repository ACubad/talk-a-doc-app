# Talk A Doc - Project TODO List

This file tracks the progress of the Talk A Doc application development.

## Accomplished Features (Initial Build)

- [x] Next.js project setup with Shadcn UI.
- [x] Audio input (recording & upload).
- [x] Input language selection.
- [x] Audio transcription via `/api/transcribe` (likely Google Cloud Speech).
- [x] Editable transcription display.
- [x] Output language selection.
- [x] Document type selection (Report, Email, Excel, PowerPoint).
- [x] Content generation via `/api/generate` (likely Gemini).
- [x] Rich text preview and editing of generated content.
- [x] Output format selection (DOCX, PDF, CSV, PPTX).
- [x] Download functionality via `/api/download`.
- [x] UI loading states and basic error handling.

## Potential Next Steps

Use Markdown checkboxes (`- [ ]` for incomplete, `- [x]` for complete) to track progress.

- [ ] **Refine Existing Features:**
    - [ ] Enhance content generation quality/consistency.
        - [x] Refine prompts to request more comprehensive output based on transcription.
    - [ ] Refine UI/UX based on feedback.
        - [x] Center icons in collapsed sidebar.
        - [x] Ensure smooth text collapse in sidebar without pre-collapse visual changes.
        - [x] Add UI element (e.g., '+' icon) to allow adding multiple audio inputs before final generation.
        - [x] Make individual transcriptions editable in the UI.
        - [x] Add UI element (e.g., 'X' icon) to allow removing individual transcription boxes.
    - [ ] Add more comprehensive error handling and reporting.
- [ ] **Implement Sidebar Functionality (Depends on User Accounts):**
    - [ ] **New Document:**
        - [ ] Save current document state to user's history (requires User Accounts & DB).
        - [ ] Clear frontend state (audio, transcription, generation, selections).
    - [ ] **History:**
        - [ ] Fetch document list from backend (requires User Accounts & DB).
        - [ ] Display document list in UI.
        - [ ] Implement preview modal/popup for selected historical document.
    - [ ] **Settings:**
        - [ ] Implement Theme switching (Light/Dark).
        - [ ] Implement Subscription management UI/logic (requires User Accounts & potentially payment provider integration).
- [ ] **Add User Accounts & History (Prerequisite for Sidebar Save/History):**
    - [x] Implement user authentication (e.g., using Supabase Auth).
    - [x] Create database schema for storing user data, transcriptions, and documents.
        - Proposed Schema (Supabase Tables):
            - `documents` table:
                - `id` (uuid, primary key, default gen_random_uuid())
                - `user_id` (uuid, foreign key to `auth.users`)
                - `created_at` (timestamp with time zone, default now())
                - `updated_at` (timestamp with time zone, default now())
                - `title` (text, nullable - maybe auto-generated initially?)
                - `input_language` (text)
                - `output_language` (text)
                - `document_type` (text) // e.g., 'Report', 'Email'
                - `generated_content` (text) // The final rich text/markdown
                - `output_format` (text) // e.g., 'DOCX', 'PDF'
            - `transcriptions` table:
                - `id` (uuid, primary key, default gen_random_uuid())
                - `document_id` (uuid, foreign key to `documents`, cascade delete)
                - `user_id` (uuid, foreign key to `auth.users`) // For easier RLS/querying
                - `created_at` (timestamp with time zone, default now())
                - `original_filename` (text, nullable)
                - `transcribed_text` (text)
                - `order` (integer) // To maintain order if multiple transcriptions per document
            - `attachments` table: (If implementing attachment saving)
                - `id` (uuid, primary key, default gen_random_uuid())
                - `document_id` (uuid, foreign key to `documents`, cascade delete)
                - `user_id` (uuid, foreign key to `auth.users`)
                - `created_at` (timestamp with time zone, default now())
                - `filename` (text)
                - `storage_path` (text) // Path in Supabase Storage
                - `mime_type` (text)
    - [x] Build UI for login/signup.
    - [x] Implement functionality to save/load user work (auto-save after generation, debounced saves on edit, load from history).
        - [x] Backend API: `/api/generate` updated to return title.
        - [x] Backend API: `/api/documents/save` created (handles insert/update).
        - [x] Backend API: `/api/documents/list` created.
        - [x] Backend API: `/api/documents/load/[documentId]` created.
        - [x] Frontend: `MainApp.tsx` updated to call save API and handle loaded state.
        - [x] Frontend: `sidebar.tsx` updated to list history and call load API via context.
        - [x] Frontend: `AppLayout.tsx` created to manage state and callback.
        - [x] Frontend: `layout.tsx` updated to use `AppLayout`.
        - [x] Hook: `useTranscription.ts` updated to expose setter.
    - [ ] Create a dashboard/history view for users (UI refinement: display list, handle selection, potentially add edit/delete).
- [ ] **Expand Document Types/Templates:**
    - [ ] Add more predefined document types (e.g., Meeting Minutes, Blog Post).
    - [ ] Implement more specific templates within types (e.g., Formal Email vs. Casual Email).
    - [ ] Allow users to provide custom prompts or instructions for generation.
    - [ ] Implement functionality to incorporate attached documents/images into the generation process (requires frontend and backend changes).
        - [x] Add UI for attaching files (button, accept types, display list).
        - [x] Implement frontend state management for attachments.
        - [x] Update backend API to accept attachment info and include in prompt context.
        - [ ] Implement backend logic to extract content from attachments for AI context.
    - [ ] Investigate generating more complex formats (e.g., specific Excel structures).
- [ ] **Enhance the Editor:**
    - [ ] Add more rich text formatting options (e.g., fonts, colors, lists, tables).
    - [ ] Ensure formatting consistency between editor and downloaded files.
    - [ ] Implement real-time collaboration features (optional, complex).
- [ ] **Improve Backend Processing:**
    - [ ] Implement background jobs for long-running tasks (transcription, generation).
    - [ ] Use WebSockets or Server-Sent Events (SSE) for real-time progress updates.
    - [ ] Optimize API performance and resource usage.
- [ ] **Prepare for Deployment:**
    - [ ] Configure environment variables for production (API keys, database URLs).
    - [ ] Set up hosting (e.g., Vercel, AWS).
    - [ ] Implement logging and monitoring.
    - [ ] Perform final testing and optimization.
- [ ] **Other Ideas:**
    - [ ] Add support for more input/output languages.
    - [ ] Integrate with other services (e.g., cloud storage).
    - [ ] Implement accessibility improvements.
